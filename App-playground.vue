<!--
  https://play.vuejs.org/#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
-->
<script setup>
  import { ref, computed } from 'vue'

  const header = ref('Shopping list app')
  const items = ref([

    ]);

  const reverseItems = computed(() => {
    return [...items.value.reverse()];
  });
  const newItem = ref("");
  const newItemHighPriority = ref(false);

  const editing = ref(false);

  const characterCount = computed(() => {
    return newItem.value.length
  });

  const  saveItem = () => {
    items.value.push({
      id: items.value.length + 1,
      label: newItem.value,
      highPriority: newItemHighPriority.value,
      purchased: false
    });
    clearInputs();
  }

  const doEdit = (isEditing) => {
    editing.value = isEditing;
    clearInputs();
  }

  const togglePurchase = (item) => {
    item.purchased = !item.purchased;
  }

  const clearInputs = () => {
    newItem.value = '';
    newItemHighPriority.value = false;
  }
</script>

<template>
  <div class="header">
    <h1>{{ header || "Welcome!" }}</h1>
    <button class="btn btn-cancel" v-if="editing" @click="doEdit(false)">
      Cancel
    </button>
    <button class="btn btn-primary" v-else @click="doEdit(true)">
      Add item
    </button>
  </div>
  <form class="add-item-form" v-if="editing" @submit.prevent="saveItem">
    <label>
      Name
      <input type="text" placeholder="Add an item" v-model="newItem" />
      <p v-if="characterCount > 0">{{characterCount}}/200</p>
    </label>
    <label>
      <input
        type="checkbox"
        name="priorityHigh"
        v-model="newItemHighPriority"
      />
      High priority
    </label>
    <button class="btn btn-primary" :disabled="newItem.length === 0">
      Save item
    </button>
  </form>
  <ul>
    <!-- For loop with destructuring of object items 
  <li
    v-for="{id, label, purchased, highPriority} in items"
    :key="id"
  >
  {{label}}
  </li>
  -->
    <li
      v-for="item in reverseItems"
      :key="item.id"
      :class="{strikeout: item.purchased, priority: item.highPriority}"
      @click="togglePurchase(item)"
    >
      {{item.label}}
    </li>
  </ul>
  <p v-if="items.length === 0">Nice job! You've bought everything.</p>
</template>

<style>
  body {
    background: #eff8ff;
    height: 100vh;
    width: 100vw;
    font-family: system-ui, BlinkMacSystemFont, -apple-system, Segoe UI, Roboto,
      Oxygen, Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue, sans-serif;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0;
    padding: 0;
  }

  .counter {
    font-size: 0.8rem;
    padding-left: 10px;
    padding-right: 10px;
  }

  #shopping-list {
    background: #fff;
    padding: 2rem;
    margin: 1rem;
    border-radius: 3px;
    box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.12), 0 2px 4px 0 rgba(0, 0, 0, 0.08);
    width: 95%;
    max-width: 900px;
  }

  h1 {
    color: #3d4852;
  }

  ul {
    list-style: none;
    padding: 0;
  }

  a {
    color: #6cb2eb;
    font-size: 1.25rem;
    transition: all 0.1s ease-in;
    margin-top: 0.5rem;
    display: block;
  }

  a:hover {
    color: #3490dc;
  }

  li,
  p {
    display: flex;
    align-items: center;
    line-height: 1.75;
    letter-spacing: 0.5px;
    color: #3d4852;
    font-size: 1.25rem;
    cursor: pointer;
    transition: all 0.1s ease-in;
  }

  li:hover {
    color: #22292f;
  }

  li input {
    margin: 0 0.5rem 0;
  }

  #shopping-list > input,
  #shopping-list > select {
    width: 100%;
    border-radius: 3px;
    box-shadow: 0 2px 4px 0 rgba(0, 0, 0, 0.1);
    border: 1px solid #f1f5f8;
    color: #606f7b;
    padding: 0.5rem 0.75rem;
    box-sizing: border-box;
    font-size: 1rem;
    letter-spacing: 0.5px;
    margin: 0.5rem 0;
  }

  .add-item-form,
  .header {
    display: flex;
    align-items: center;
    justify-content: space-between;
  }

  .add-item-form input {
    width: 70%;
    border-radius: 3px;
    box-shadow: 0 2px 4px 0 rgba(0, 0, 0, 0.1);
    border: 1px solid #f1f5f8;
    color: #606f7b;
    padding: 0.5rem 0.75rem;
    box-sizing: border-box;
    font-size: 1rem;
    letter-spacing: 0.5px;
    margin: 0.5rem 0;
  }

  .btn {
    border: none;
    border-radius: 3px;
    margin: auto 0;
    padding: 0.5rem 0.75rem;
    flex-shrink: 0;
    cursor: pointer;
    font-size: 0.9rem;
    letter-spacing: 0.5px;
    transition: all 0.1s ease-in;
  }

  .btn[disabled] {
    background: #8795a1;
  }

  .btn[disabled]:hover {
    background: #606f7b;
  }

  .btn-primary {
    background: #6cb2eb;
    color: #fff;
  }

  .btn-primary:hover {
    background: #3490dc;
  }

  .btn-cancel {
    background: #ef5753;
    color: #fff;
  }

  .btn-cancel:hover {
    background: #e3342f;
    color: #fff;
  }

  .strikeout {
    text-decoration: line-through;
    color: #b8c2cc;
  }

  .strikeout:hover {
    color: #8795a1;
  }

  .priority {
    color: #de751f;
  }
</style>
